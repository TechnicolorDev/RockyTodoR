(()=>{"use strict";var e,o={366:(e,o,t)=>{var r=t(848),n=t(540),s=t(338),a=t(181),i=t(83),l=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};i.A.defaults.withCredentials=!0,i.A.defaults.baseURL="/";const c="api",d="fACEbLcmw9RV7sn4xkjC4oPc",u=()=>localStorage.getItem("csrfToken");i.A.interceptors.request.use((e=>{const o=u();return o&&(e.headers["X-CSRF-Token"]=o),e}),(e=>Promise.reject(e)));i.A.interceptors.request.use((e=>{const o=u();return o&&(e.headers["X-CSRF-Token"]=o),e.headers.Authorization=`Bearer ${d}`,e}),(e=>Promise.reject(e)));const p=()=>l(void 0,void 0,void 0,(function*(){try{const e=yield i.A.get("/api/todos");return Array.isArray(e.data)?e.data:(console.error("Response is not an array:",e.data),[])}catch(e){return console.error("Error fetching todos:",e),[]}}));var h=t(418),m=t(845),v=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const f=()=>{const[e,o]=(0,n.useState)({name:"",email:"",password:""}),t=(0,a.Zp)(),s=e=>h.A.sanitize(e),l=t=>{const r=s(t.target.value);o(Object.assign(Object.assign({},e),{[t.target.name]:r}))};return(0,r.jsxs)("div",{className:"install",children:[(0,r.jsx)("h1",{children:"Admin Setup"}),(0,r.jsxs)("form",{onSubmit:o=>v(void 0,void 0,void 0,(function*(){o.preventDefault(),m.oR.error(null);const r=s(e.name),n=s(e.email),a=s(e.password);var l;if((l=a).length<5?(m.oR.error("Password must be at least 5 characters long."),0):!["123456","password","123456789","12345","1234","qwerty","abc123","password1","letmein","monkey","123123"].includes(l)||(m.oR.error("Password is too common. Please choose a stronger password."),0))try{yield(e=>{const o=u(),t=`Bearer ${d}`;return console.log("Making POST request to install admin"),console.log("CSRF Token:",o),console.log("Authorization Token:",t),console.log("Request Data:",e),i.A.post(`${c}/install`,e,{headers:{"X-CSRF-Token":o,"Content-Type":"application/json"}}).then((e=>(console.log("Response:",e),e))).catch((e=>{console.error("Error occurred during installation:",e),e.response?(console.error("Error Response:",e.response),console.error("Error Status:",e.response.status),console.error("Error Headers:",e.response.headers),console.error("Error Data:",e.response.data)):console.error("Error without response:",e)}))})({name:r,email:n,password:a}),m.oR.success("You are all set! Get to work."),t("/login")}catch(e){m.oR.error("Failed to create admin: "+e)}})),children:[(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Name",onChange:l}),(0,r.jsx)("input",{type:"email",name:"email",placeholder:"Email",onChange:l}),(0,r.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:l}),(0,r.jsx)("button",{type:"submit",children:"Setup Admin"})]})]})};t(482);var g=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const x=()=>{const[e,o]=(0,n.useState)({email:"",password:""}),t=(0,a.Zp)(),s=t=>{var r;o(Object.assign(Object.assign({},e),{[t.target.name]:(r=t.target.value,h.A.sanitize(r.trim()))}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"login",children:[(0,r.jsx)("h1",{children:"Login"}),(0,r.jsxs)("form",{onSubmit:o=>g(void 0,void 0,void 0,(function*(){var r,n,s,a,d;o.preventDefault();try{const o=yield(d=e,l(void 0,void 0,void 0,(function*(){try{const e=yield i.A.post(`${c}/login`,d);return e.data.csrfToken&&localStorage.setItem("csrfToken",e.data.csrfToken),e.data}catch(e){throw e}})));o.csrfToken&&sessionStorage.setItem("csrfToken",o.csrfToken),sessionStorage.setItem("adminId",o.adminId.toString()),s="success",a=o.message||"Login successful.","success"===s?m.oR.success(a,{autoClose:5e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0}):"error"===s&&m.oR.error(a,{autoClose:5e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout((()=>{t("/")}),100)}catch(e){(null===(n=null===(r=e.response)||void 0===r?void 0:r.data)||void 0===n?void 0:n.error)?m.oR.error(e.response.data.error):e instanceof Error?m.oR.error(e.message):m.oR.error("An unknown error occurred.")}})),children:[(0,r.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:s,required:!0}),(0,r.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:s,required:!0}),(0,r.jsx)("button",{type:"submit",children:"Log In"})]})]})})},y=({todo:e})=>{const o=(0,a.Zp)(),t=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e.dueDate));return(0,r.jsxs)("div",{className:"todo-item",children:[(0,r.jsx)("h3",{className:"todo-item-h3",children:e.name}),(0,r.jsx)("p",{className:"todo-item-p1",children:e.description}),(0,r.jsxs)("p",{className:"todo-item-p2",children:["Due: ",t]}),(0,r.jsx)("a",{href:e.repoUrl,target:"_blank",rel:"noopener noreferrer",className:"todo-item-p3",children:"Repo"}),(0,r.jsx)("button",{onClick:()=>o(`/todos/edit/${e.todoId}`),className:"todo-item-btn",children:"Edit"})]})};var j=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const w=()=>{const[e,o]=(0,n.useState)([]),t=(0,a.Zp)();return(0,n.useEffect)((()=>{j(void 0,void 0,void 0,(function*(){const e=yield p();o(e)}))}),[]),(0,r.jsxs)("div",{className:"todos",children:[(0,r.jsx)("h1",{className:"todo-list-h1",children:"Todo List"}),0===e.length&&(0,r.jsx)("p",{className:"todo-list-p1",children:"No todos found, please add some!"}),(0,r.jsx)("button",{onClick:()=>t("/todos/create"),className:"todo-list-btn",children:"Create Todo"}),(0,r.jsx)("div",{className:"todo-list",children:e.map((e=>(0,r.jsx)(y,{todo:e},e.todoId)))})]})};var b=function(e,o){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)o.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]])}return t};const S=e=>{var{element:o}=e;b(e,["element"]);return!!sessionStorage.getItem("adminId")?o:(0,r.jsx)(a.C5,{to:"/login",replace:!0})};var R=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const C=()=>{const e=(0,a.Zp)(),[o,t]=(0,n.useState)({name:"",description:"",dueDate:"",repoUrl:""}),[s,d]=(0,n.useState)(null),u=e=>{t(Object.assign(Object.assign({},o),{[e.target.name]:e.target.value}))};return(0,r.jsxs)("div",{className:"todo-create",children:[(0,r.jsx)("h1",{className:"create-h1",children:"Create Todo"}),s&&(0,r.jsx)("p",{className:"error",children:s}),(0,r.jsxs)("form",{onSubmit:t=>R(void 0,void 0,void 0,(function*(){t.preventDefault();const r={name:h.A.sanitize(o.name),description:h.A.sanitize(o.description),dueDate:h.A.sanitize(o.dueDate),repoUrl:h.A.sanitize(o.repoUrl)};try{const o=yield(n=r,l(void 0,void 0,void 0,(function*(){try{return(yield i.A.post(`${c}/todos`,n)).data}catch(e){throw console.error("Error creating todo:",e),e}})));console.log("Todo created:",o),e("/"),m.oR.success("Todo successfully created!")}catch(e){m.oR.error("Failed to create todo, all fields are required"),console.error("Failed to create todo:",e)}var n})),children:[(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:o.name,onChange:u}),(0,r.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:o.description,onChange:u}),(0,r.jsx)("input",{type:"date",name:"dueDate",value:o.dueDate,onChange:u}),(0,r.jsx)("input",{type:"url",name:"repoUrl",placeholder:"Repo URL",value:o.repoUrl,onChange:u}),(0,r.jsx)("button",{type:"submit",className:"create-btn",children:"Create Todo"})]})]})},k=({isOpen:e,onClose:o,onConfirm:t,message:n})=>e?(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-container",children:[(0,r.jsx)("h2",{children:n}),(0,r.jsxs)("div",{className:"modal-actions",children:[(0,r.jsx)("button",{className:"modal-button",onClick:t,children:"Yes, Delete"}),(0,r.jsx)("button",{className:"modal-button",onClick:o,children:"Cancel"})]})]})}):null;var P=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const T=()=>{const[e,o]=(0,n.useState)({name:"",description:"",dueDate:"",repoUrl:""}),[t,s]=(0,n.useState)(null),u=(0,a.Zp)(),[h,v]=(0,n.useState)(!1),{id:f}=(0,a.g)();(0,n.useEffect)((()=>{P(void 0,void 0,void 0,(function*(){if(f)try{const e=(yield p()).find((e=>e.todoId===f));e?o({name:e.name,description:e.description,dueDate:new Date(e.dueDate).toISOString().slice(0,10),repoUrl:e.repoUrl}):(console.error("Todo not found"),m.oR.error("Todo not found!"))}catch(e){console.error("Error fetching todo details:",e),m.oR.error("Error fetching todoId! Check console for more details")}else console.error("Todo ID is missing")}))}),[f]);const g=e=>{const{name:t,value:r}=e.target;o((e=>Object.assign(Object.assign({},e),{[t]:r})))},x=()=>P(void 0,void 0,void 0,(function*(){var e;if(f)try{yield(e=f,l(void 0,void 0,void 0,(function*(){try{const o=yield i.A.delete(`${c}/todos/${e}`);return console.log("Response from delete:",o),o.data}catch(e){throw console.error("Error deleting todo:",e),e}}))),m.oR.success("Todo deleted successfully!"),v(!1),u("/")}catch(e){console.error("Error deleting todo:",e),m.oR.error("Failed to delete the todo.")}else m.oR.error("Todo ID is missing.")}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{onSubmit:o=>P(void 0,void 0,void 0,(function*(){if(o.preventDefault(),!(f&&e.name&&e.description&&e.dueDate&&e.repoUrl))return console.error("Todo ID or data is missing."),void m.oR.warning("Please fill out all fields.");try{yield(t=f,r=e,l(void 0,void 0,void 0,(function*(){try{const e=localStorage.getItem("csrfToken"),o=yield i.A.patch(`${c}/todos/${t}`,r,{headers:{"Content-Type":"application/json","X-CSRF-Token":e,Authorization:`Bearer ${d}`}});console.log("Response:",o.data)}catch(e){i.A.isAxiosError(e)?(console.error("AxiosError:",e),console.error("Error response:",e.response),console.error("Error request:",e.request),console.error("Error message:",e.message),console.error("Error config:",e.config)):console.error("Unknown error:",e)}}))),m.oR.success("Todo updated successfully!"),u("/")}catch(e){console.error("Error editing todo:",e),m.oR.error("Failed to update the todo.")}var t,r})),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:e.name,onChange:g})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Description"}),(0,r.jsx)("input",{type:"text",name:"description",value:e.description,onChange:g})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Due Date"}),(0,r.jsx)("input",{type:"date",name:"dueDate",value:e.dueDate,onChange:g})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Repo URL"}),(0,r.jsx)("input",{type:"text",name:"repoUrl",value:e.repoUrl,onChange:g})]}),t&&(0,r.jsx)("div",{className:"error",children:t}),(0,r.jsx)("button",{type:"submit",children:"Update Todo"}),(0,r.jsx)("button",{type:"button",onClick:x,style:{marginLeft:"10px",backgroundColor:"red",color:"white"},children:"Delete Todo"})]}),(0,r.jsx)(k,{isOpen:h,onClose:()=>{v(!1)},onConfirm:x,message:"Are you sure you want to delete this Todo?"})]})};var O=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const A=()=>{const[e,o]=(0,n.useState)(""),[t,s]=(0,n.useState)(""),[a,c]=(0,n.useState)("");return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Forgot Password"}),(0,r.jsxs)("form",{onSubmit:o=>O(void 0,void 0,void 0,(function*(){o.preventDefault(),c(""),s("");const t=(r=e,h.A.sanitize(r));var r;if(!(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(t))return c("Invalid email address."),void m.oR.error("Invalid email address.");try{yield(e=>l(void 0,void 0,void 0,(function*(){try{const o=yield i.A.post("/api/emails/forgot-password",{email:e});console.log("Response Data:",o.data);const t=o.data.token||o.data.toke;if(t){const e={token:t,expiration:Date.now()+36e5};localStorage.setItem("csrfToken",JSON.stringify(e)),console.log("CSRF Token stored in localStorage:",e)}else console.error("No CSRF token received in response data");console.log("Password reset email sent successfully.")}catch(e){console.error("Error sending password reset email:",e)}})))(t);m.oR.success("If this email exists, a password reset link has been sent."),s("Check your inbox for further instructions.")}catch(e){m.oR.error("There was an error sending the password reset email."),c("Failed to send the reset email. Please try again later.")}})),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>o(e.target.value),required:!0})]}),(0,r.jsx)("button",{type:"submit",children:"Send Password Reset Email"})]}),t&&(0,r.jsx)("p",{style:{color:"green"},children:h.A.sanitize(t)}),a&&(0,r.jsx)("p",{style:{color:"red"},children:h.A.sanitize(a)})]})};var D=t(65),E=t.n(D),N=function(e,o,t,r){return new(t||(t=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,i)}l((r=r.apply(e,o||[])).next())}))};const I=()=>{const[e,o]=(0,n.useState)(""),[t,s]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[v,f]=(0,n.useState)(!1),g=(0,a.zy)(),x=(0,a.Zp)(),y=new URLSearchParams(g.search).get("token");(0,n.useEffect)((()=>{y||m.oR.error("Invalid or missing token")}),[y]);const j=e=>h.A.sanitize(e);return(0,r.jsxs)("div",{className:"reset-password-container",children:[(0,r.jsx)("h2",{children:"Reset Your Password"}),c&&(0,r.jsx)("p",{style:{color:"red"},children:h.A.sanitize(c)}),u&&(0,r.jsx)("p",{style:{color:"green"},children:h.A.sanitize(u)}),(0,r.jsxs)("form",{onSubmit:o=>N(void 0,void 0,void 0,(function*(){var r,n;o.preventDefault(),d(""),p("");const s=j(e),a=j(t);if(s.length<5)return m.oR.error("Password must be at least 5 characters long."),void d("Password must be at least 5 characters long.");if(c=s,!(E()(c).score>=3))return m.oR.error("Password is too weak. Please choose a stronger password."),void d("Password is too weak. Please choose a stronger password.");var c;if(s!==a)return m.oR.error("Passwords do not match."),void d("Passwords do not match.");if(y){f(!0);try{const e=yield((e,o)=>l(void 0,void 0,void 0,(function*(){try{const t=JSON.parse(localStorage.getItem("csrfToken")||"{}");if(!t.token)throw new Error("CSRF token is missing");if(Date.now()>t.expiration)throw localStorage.removeItem("csrfToken"),new Error("CSRF token has expired");const r=t.token;console.log("Sending request with CSRF Token:",r);const n=yield i.A.post("/api/emails/reset-password",{token:e,newPassword:o},{headers:{"Content-Type":"application/json","X-CSRF-Token":r}});return console.log("Response Data:",n.data),console.log("Response Headers:",n.headers),n.data}catch(e){throw console.error("Error resetting password:",e),e}})))(y,s);m.oR.success(e.message||"Password reset successfully!"),x("/login")}catch(e){console.error("Error details:",e),m.oR.error((null===(n=null===(r=e.response)||void 0===r?void 0:r.data)||void 0===n?void 0:n.error)||"Failed to reset password. Please try again.")}finally{f(!1)}}else d("Invalid token, please try again.")})),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"new-password",children:"New Password"}),(0,r.jsx)("input",{type:"password",id:"new-password",value:e,onChange:e=>o(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirm-password",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",id:"confirm-password",value:t,onChange:e=>s(e.target.value),required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:v,children:v?"Resetting...":"Reset Password"})]})]})},F=()=>(0,r.jsx)(a.Kd,{children:(0,r.jsxs)("div",{className:"app",children:[(0,r.jsx)(m.N9,{autoClose:5e3,position:"top-right",hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,r.jsxs)(a.BV,{children:[(0,r.jsx)(a.qh,{path:"/",element:(0,r.jsx)(S,{element:(0,r.jsx)(w,{}),path:"/"})}),(0,r.jsx)(a.qh,{path:"/todos/create",element:(0,r.jsx)(S,{element:(0,r.jsx)(C,{}),path:"/todos/create"})}),(0,r.jsx)(a.qh,{path:"/login",element:(0,r.jsx)(x,{})}),(0,r.jsx)(a.qh,{path:"/install",element:(0,r.jsx)(f,{})}),(0,r.jsx)(a.qh,{path:"/todos/edit/:id",element:(0,r.jsx)(T,{})}),(0,r.jsx)(a.qh,{path:"/forgot-password",element:(0,r.jsx)(A,{})}),(0,r.jsx)(a.qh,{path:"/reset-password",element:(0,r.jsx)(I,{})})]})]})});s.createRoot(document.getElementById("root")).render((0,r.jsx)(n.StrictMode,{children:(0,r.jsx)(F,{})}))}},t={};function r(e){var n=t[e];if(void 0!==n)return n.exports;var s=t[e]={exports:{}};return o[e](s,s.exports,r),s.exports}r.m=o,e=[],r.O=(o,t,n,s)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){t=e[d][0],n=e[d][1],s=e[d][2];for(var i=!0,l=0;l<t.length;l++)(!1&s||a>=s)&&Object.keys(r.O).every((e=>r.O[e](t[l])))?t.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(d--,1);var c=n();void 0!==c&&(o=c)}}return o}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[t,n,s]},r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0,869:0};r.O.j=o=>0===e[o];var o=(o,t)=>{var n,s,a=t[0],i=t[1],l=t[2],c=0;if(a.some((o=>0!==e[o]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var d=l(r)}for(o&&o(t);c<a.length;c++)s=a[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(d)},t=self.webpackChunkuntitled3=self.webpackChunkuntitled3||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var n=r.O(void 0,[96,869],(()=>r(366)));n=r.O(n)})();